<app-nav-bar></app-nav-bar>

<div class="full-screen-container flex items-center justify-center min-h-screen bg-black text-white px-4">
    <div class="w-full max-w-4xl bg-black rounded-2xl shadow-xl p-8">
        <div class="bg-gray-900 p-6 rounded-xl shadow-lg w-full space-y-6">
            <!-- Título e instrucciones -->
            <div class="text-center">
                <h1 class="text-green-400 text-4xl font-bold">Cifrado Asimétrico</h1>
                <p class="text-white mt-2">Carga un archivo o escribe texto para cifrar o descifrar</p>
            </div>

            <!-- Input archivo -->
            <div class="flex justify-center">
                <input type="file" (change)="onFileSelected($event)" class="block w-full text-sm text-white
          file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0
          file:text-sm file:font-semibold file:bg-green-600 file:text-white
          hover:file:bg-green-700 cursor-pointer bg-gray-800 rounded-lg p-2" aria-label="Subir archivo">
            </div>

            <!-- Texto plano -->
            <div class="bg-gray-800 p-4 rounded-lg">
                <label class="block text-white font-medium mb-1" for="textoPlano">Texto</label>
                <textarea id="textoPlano" [(ngModel)]="textoPlano"
                    placeholder="Escribe texto para cifrar o texto descifrado" rows="4"
                    class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
            </div>

            <!-- Frase para proteger clave privada -->
            <div class="bg-gray-800 p-4 rounded-lg">
                <label class="block text-white font-medium mb-1" for="fraseLlavePrivada">Frase para proteger/desbloquear
                    clave privada</label>
                <input id="fraseLlavePrivada" type="password" [(ngModel)]="fraseLlavePrivada"
                    placeholder="Ingrese una frase segura"
                    class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-500" />
            </div>

            <!-- Botones -->
            <div class="flex justify-center gap-4 flex-wrap">
                <button (click)="generarParClaves()"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition transform hover:scale-110 hover:shadow-lg">
                    Generar Claves
                </button>
                <button (click)="cifrar()"
                    class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition transform hover:scale-110 hover:shadow-lg">
                    Cifrar
                </button>
                <button (click)="descifrar()"
                    class="bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-6 rounded-lg transition transform hover:scale-110 hover:shadow-lg">
                    Descifrar
                </button>
            </div>

            <!-- Mensajes de estado -->
            @if (estado) {
            <div class="my-4 p-4 bg-gray-700 rounded-lg text-white font-semibold break-words">
                {{ estado }}
            </div>
            }

            <!-- Mostrar clave pública -->
            @if (clavePublica) {
            <div class="bg-gray-800 p-4 rounded-lg">
                <h2 class="font-semibold mb-2">Clave Pública (PEM)</h2>
                <textarea rows="6" readonly
                    class="w-full p-2 rounded-lg bg-gray-700 text-white break-all">{{ clavePublica }}</textarea>
            </div>
            }

            <!-- Mostrar clave privada protegida -->
            @if (clavePrivadaProtegida) {
            <div class="bg-gray-800 p-4 rounded-lg">
                <h2 class="font-semibold mb-2">Clave Privada Protegida (PEM)</h2>
                <textarea rows="6" readonly
                    class="w-full p-2 rounded-lg bg-gray-700 text-white break-all">{{ clavePrivadaProtegida }}</textarea>
            </div>
            }

            <!-- Mostrar resultado cifrado/descifrado -->
            @if (resultadoCifrado || clavePrivadaDescifrada) {
            <div class="bg-gray-800 p-4 rounded-lg break-words">
                <h2 class="font-semibold mb-2">Resultado del proceso</h2>
                <textarea rows="6" readonly class="w-full p-2 rounded-lg bg-gray-700 text-white break-all text-left">
                    {{ clavePrivadaDescifrada || resultadoCifrado }}
                  </textarea>
            </div>
            }



        </div>
    </div>
</div>

<app-footer></app-footer>